---
import ThemeSelect from "@components/ThemeSelect.astro";
import SettingsLayout from "@layouts/SettingsLayout.astro";
import styles from "@styles/Settings.module.scss";
---

<SettingsLayout title="Appearance Settings">
  <section>
    <div>
      <p>Theme:</p>
      <ThemeSelect
        class={styles.ThemeSelect}
        value={Astro.locals.theme}
        id="themeSwitcher"
        options={[
          { name: "Day", value: "Day" },
          {
            name: "Night",
            value: "night",
          },
        ]}
      />
    </div>
  </section>
</SettingsLayout>
<script>
  import { setTheme } from "@lib/cookies";

  document.addEventListener("astro:page-load", () => {
    const themeSwitcher =
      document.querySelector<HTMLInputElement>("#themeSwitcher");
    if (!themeSwitcher) return; // page not loaded

    themeSwitcher.addEventListener("change", () => {
      setTheme(themeSwitcher.value);
    });
  });
</script>
